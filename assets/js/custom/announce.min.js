function selectCategoryPrimary(e,a,i){var t=$("#ai-f-c-sub");$("#ai-category").val(""),t.html("<i class='fa fa-fw fa-spin fa-cog'></i>"),$.post(base_url+"/announce/categories",{category:e},function(){}).done(function(e){t.html(e),a&&setTimeout(function(){$("#ai-f-c-sub li[data-id='"+a+"']").addClass("active"),selectCategorySecondary(a,i)},500)}).error(function(){t.html(""),$("#ai-f-c-parent li").removeClass("active")}).always(function(){console.clear()})}function selectCategorySecondary(e,a){customFields(e,a),$("#ai-category").val(e)}function settingPrice(e,a){"service"==a&&(e.is(":checked")?($("#ai-price").attr("disabled","disabled"),$("#ai-yes-trade").attr("checked",!1)):$("#ai-price").removeAttr("disabled")),"trade"==a&&e.is(":checked")&&($("#ai-no-price").attr("checked",!1),$("#ai-price").removeAttr("disabled"))}function settingAddress(e){e.is(":checked")?$("#ai-cep, #ai-address, #ai-city, #ai-state").attr("disabled","disabled"):$("#ai-cep, #ai-address, #ai-city, #ai-state").removeAttr("disabled")}function customFields(e,a){var i=$("#ai-custom-fields");i.html("<div class='row'><div class='small-3 medium-2 columns'>&nbsp;</div><div class='small-9 medium-10 columns'><i class='fa fa-fw fa-spin fa-cog'></i><br><br></div></div>"),$.ajax({url:base_url+"/main/category_fields",type:"POST",data:{category:e,ads_fields:a}}).done(function(e){i.html(e?e:"")}).fail(function(){console.log("custom fields: error"),i.html("")}).always(function(){})}$(document).ready(function(){$("#ai-f-c-parent").on("click","li",function(e){var a=$(this),i=a.attr("data-id");e.preventDefault(),$("#ai-f-c-parent li").removeClass("active"),a.addClass("active"),selectCategoryPrimary(i,!1)}),$("#ai-f-c-sub").on("click","li",function(e){var a=$(this),i=a.attr("data-id");e.preventDefault(),$("#ai-f-c-sub li").removeClass("active"),a.addClass("active"),selectCategorySecondary(i)}),$("#ai-no-price").on("change",function(e){var a=$(this);e.preventDefault(),settingPrice(a,"service")}),$("#ai-yes-trade").on("change",function(e){var a=$(this);e.preventDefault(),settingPrice(a,"trade")}),$("#ai-f-images-input").on("change",function(){var e=$(this)[0],a=e.files,i=a.length,t=$("#ai-f-images-box"),c=92160,s=0;for(t.html("");i-1>=s;){{var n=a[s];n.name}console.log(n),n.size>=c&&console.log("A imagem "+n.name+" está acima do tamanho máximo!");var r=300*(s+1);setTimeout(function(){var e=new Image;e.src=URL.createObjectURL(n),e.onload=function(){var a=this.width,i=this.height,c=i/a;if(!(Number(a)>150))return!1;var n=Math.round(Number(150)*c),r='<canvas id="cnvs_'+s+'" width="150" height="150"></canvas>';t.prepend('<div class="item">'+r+"</div>");var o=document.getElementById("cnvs_"+s),d=o.getContext("2d");d.drawImage(e,0,75-n/2,150,n)}},r),s++}$("#ai-f-images-count").html(i+" imagem(s) selecionada(s)")}),$("#ai-use-info").on("change",function(e){var a=$(this);e.preventDefault(),settingAddress(a)}),$("#ai-form").on("click","button[type='submit']",function(e){if($("#ai-f-category-required").hide(),$("#ai-form")[0].checkValidity()===!1)return!0;e.preventDefault();var a=$("#ai-category").val();return a?void $("#ai-form").submit():($("html, body").animate({scrollTop:0},"slow"),$("#ai-f-category-required").show(),!1)})});